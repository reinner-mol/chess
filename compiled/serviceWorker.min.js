!function(){"use strict";const t=new URL(self.location.href).searchParams,e=new URL(t.get("asset-url"),self.location.href).href;function n(t){return`${e}assets/${t}`}self.addEventListener("push",(t=>{const e=t.data.json();return t.waitUntil(self.registration.showNotification(e.title,{badge:n("logo/lichess-mono-128.png"),icon:n("logo/lichess-favicon-192.png"),body:e.body,tag:e.tag,data:e.payload,requireInteraction:!0}))})),self.addEventListener("notificationclick",(t=>t.waitUntil(async function(t){(await self.registration.getNotifications()).forEach((t=>t.close()));const e=await self.clients.matchAll({type:"window",includeUncontrolled:!0}),n=t.notification.data.userData;let a="/";n.fullId?a="/"+n.fullId:n.threadId?a="/inbox/"+n.threadId:n.challengeId&&(a="/"+n.challengeId);for(const t of e)if(new URL(t.url,self.location.href).pathname===a&&"focus"in t)return await t.focus();for(const t of e)if("/"===new URL(t.url,self.location.href).pathname)return await t.navigate(a);return await self.clients.openWindow(a)}(t))))}();
