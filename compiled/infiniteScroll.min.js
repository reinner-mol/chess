var InfiniteScroll=function(){"use strict";const e={cache:"no-cache",credentials:"same-origin"},n={"X-Requested-With":"XMLHttpRequest"},t=(t,i={})=>fetch(t,Object.assign(Object.assign(Object.assign({},e),{headers:Object.assign({},n)}),i));function i(e,n,c=500){const s=e.querySelector(".pager"),r=null==s?void 0:s.querySelector(".pager a"),a=null==r?void 0:r.href;s&&a&&new Promise((e=>{o(s)?e():window.addEventListener("scroll",(function n(){o(s)&&(window.removeEventListener("scroll",n),e())}),{passive:!0})})).then((()=>(s.innerHTML='<div class="spinner"><svg viewBox="0 0 40 40"><circle cx=20 cy=20 r=18 fill="none"></circle></svg></div>',((e,n={})=>t(e,n).then((e=>{if(e.ok)return e.text();throw e.statusText})))(a)))).then((t=>{s.remove(),$(e).append($(t).find(n).html()),function(e){const n=new Set;$(e).find("[data-dedup]").each((function(){const e=$(this).data("dedup");e&&(n.has(e)?$(this).remove():n.add(e))}))}(e),lichess.contentLoaded(e),setTimeout((()=>i(e,n,1.05*c)),c)}),(e=>{console.log(e),s.remove()}))}function o(e){const{top:n,bottom:t}=e.getBoundingClientRect();return(n>0||t>0)&&n<window.innerHeight}return function(e){$(e).each((function(){i(this,e)}))}}();
