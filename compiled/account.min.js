!function(){"use strict";const e={cache:"no-cache",credentials:"same-origin"},t={"X-Requested-With":"XMLHttpRequest"},s=(e,t={})=>o(e,t).then((e=>{if(e.ok)return e.text();throw e.statusText})),o=(s,o={})=>fetch(s,Object.assign(Object.assign(Object.assign({},e),{headers:Object.assign({},t)}),o));lichess.load.then((()=>{const e=lichess.storage.make("arrow.snap"),t=lichess.storage.make("courtesy");$(".security table form").on("submit",(function(){return s(this.action,{method:"post"}),$(this).parent().parent().remove(),!1})),$("form.autosubmit").each((function(){const o=this,a=$(o),r=()=>a.find(".saved").show();a.find("input").on("change",(function(){"behavior.arrowSnap"==this.name?(e.set(this.value),r()):"behavior.courtesy"==this.name&&(t.set(this.value),r()),(e=>{const t=e.getAttribute("action");return t?s(t,{method:e.method,body:new FormData(e)}):Promise.reject(`Form has no action: ${e}`)})(o).then((()=>{r(),lichess.storage.fire("reload-round-tabs")}))}))})),$(`#irbehavior_arrowSnap_${e.get()||1}`).prop("checked",!0),$(`#irbehavior_courtesy_${t.get()||0}`).prop("checked",!0)}))}();
