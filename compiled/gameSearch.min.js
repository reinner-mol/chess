!function(){"use strict";lichess.load.then((()=>{const n=document.querySelector(".search__form"),e=$(n),t=e.find(".usernames input"),s=e.find(".user-row"),o=$(".search__result");function i(n){const s=["<option value=''></option>"],o=function(n,t,s,o){const i=e.data(o);return n.classList.contains(t)&&i.length&&s==i?"selected":""};(function(){const n=[];return t.each((function(){const e=this.value.trim();e&&n.push(e)})),n})().forEach((function(e){const t=[];t.push("<option value='"+e+"'"),t.push(o(n,"winner",e,"req-winner")),t.push(o(n,"loser",e,"req-loser")),t.push(o(n,"whiteUser",e,"req-white")),t.push(o(n,"blackUser",e,"req-black")),t.push(">"+e+"</option>"),s.push(t.join(""))})),$(n).find("select").html(s.join("")),n.classList.toggle("none",s.length<2)}function c(){s.each((function(){i(this)}))}c(),t.on("input paste",c);const r=function(){e.find(".opponent select").each((function(){e.find(".aiLevel").toggleClass("none","1"!=this.value),e.find(".opponentName").toggleClass("none","1"==this.value)}))};r(),e.find(".opponent select").on("change",r);const a=function(){const e=new URLSearchParams;for(const[t,s]of new FormData(n).entries())""!=s&&e.set(t,s);return e.toString()}();o.find("a.permalink").each((function(){this.href=this.href.split("?")[0]+"?"+a}));const u=()=>o.find(".infinite-scroll .pager a").each((function(){this.href=this.href+"&"+a}));u(),lichess.pubsub.on("content-loaded",u),e.on("submit",(()=>{e.find("input,select").filter((function(){return!this.value})).attr("disabled","disabled"),e.addClass("searching")}))}))}();
