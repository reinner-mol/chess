!function(){"use strict";const e={cache:"no-cache",credentials:"same-origin"},t={"X-Requested-With":"XMLHttpRequest"},s=(e,t={})=>n(e,t).then((e=>{if(e.ok)return e.text();throw e.statusText})),n=(s,n={})=>fetch(s,Object.assign(Object.assign(Object.assign({},e),{headers:Object.assign({},t)}),n));let o;try{const e=window.crypto.getRandomValues(new Uint8Array(9));o=btoa(String.fromCharCode(...e)).replace(/[/+]/g,"_")}catch(e){o=Math.random().toString(36).slice(2,12)}const r=o,a=(e=>{const t={get:t=>e.getItem(t),set:(t,s)=>e.setItem(t,s),fire:(t,s)=>e.setItem(t,JSON.stringify({sri:r,nonce:Math.random(),value:s})),remove:t=>e.removeItem(t),make:s=>({get:()=>t.get(s),set:e=>t.set(s,e),fire:e=>t.fire(s,e),remove:()=>t.remove(s),listen:t=>window.addEventListener("storage",(n=>{if(n.key!==s||n.storageArea!==e||null===n.newValue)return;let o;try{o=JSON.parse(n.newValue)}catch(e){return}(null==o?void 0:o.sri)&&o.sri!==r&&t(o)}))}),makeBoolean:e=>({get:()=>"1"==t.get(e),set:s=>t.set(e,s?"1":"0"),toggle:()=>t.set(e,"1"==t.get(e)?"0":"1")})};return t})(window.localStorage);const c=(e,t={})=>{const s=(t=t||{}).sameDomain?"":document.body.getAttribute("data-asset-url"),n=t.version||document.body.getAttribute("data-asset-version");return s+"/assets"+(t.noVersion?"":"/_"+n)+"/"+e},i=new Map,h=new Map,l=(e,t={})=>{var s;return h.has(e)||h.set(e,(s=c(e,t),new Promise(((e,t)=>{const n=document.body.getAttribute("data-nonce"),o=document.createElement("script");n&&o.setAttribute("nonce",n),o.onload=e,o.onerror=t,o.src=s,document.head.append(o)})))),h.get(e)},d=()=>((e=>{if(!i.has(e)){i.set(e,!0);const t=document.createElement("link");t.rel="stylesheet",t.href=c(e),document.head.append(t)}})("vendor/hopscotch/dist/css/hopscotch.min.css"),l("vendor/hopscotch/dist/js/hopscotch.min.js",{noVersion:!0}));lichess.load.then((()=>{var e,t;$(".user-show .note-zone-toggle").each((function(){$(this).on("click",(()=>{var e;return null===(e=$(".user-show .note-zone").toggle().find("textarea")[0])||void 0===e?void 0:e.focus()})),location.search.includes("note")&&$(this).trigger("click")})),$(".user-show .claim_title_zone").each((function(){const e=$(this);e.find(".actions a").on("click",(function(){return s(this.href,{method:"post"}),e.remove(),!1}))})),$("#perfStat.correspondence .view_games").length&&(e="user-correspondence-view-games","always"===t||!a.get(e)&&(a.set(e,"1"),1))&&d().then((()=>{window.hopscotch.configure({i18n:{nextBtn:"OK, got it"}}).startTour({id:"correspondence-games",showPrevButton:!0,isTourBubble:!1,steps:[{title:"Recently finished games",content:"Would you like to display the list of your correspondence games, sorted by completion date?",target:$("#perfStat.correspondence .view_games")[0],placement:"bottom"}]})})),$(".user-show .angles").each((function(){const e=$(this),t=$(".angle-content"),n=e=>s(e).then((s=>{t.html(s),lichess.contentLoaded(t[0]),history.replaceState({},"",e),window.InfiniteScroll(".infinite-scroll")}));e.on("click","a",(function(){return e.find(".active").removeClass("active"),$(this).addClass("active"),n(this.href),!1})),$(".user-show").on("click","#games a",(function(){return!(!$("#games .to-search").hasClass("active")&&!$(this).hasClass("to-search"))||($(this).addClass("active"),n(this.href),!1)}))}))}))}();
