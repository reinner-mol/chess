var LichessCli=function(e){"use strict";function o(e,n,l){o.close();const s=$('<div id="modal-wrap"><span class="close" data-icon="L"></span></div>'),a=$(`<div id="modal-overlay" class="${n}">`).on("click",o.close);return s.appendTo(a),e.clone().removeClass("none").appendTo(s),o.onClose=l,s.find(".close").on("click",o.close),s.on("click",(e=>e.stopPropagation())),$("body").addClass("overlayed").prepend(a),s}function n(e){if(e)return"/"==e[0]?function(e){const n=e.split(" "),s=n[0],a=function(e){return e.split(" ").includes(s)};a("tv follow")&&n[1]?location.href="/@/"+n[1]+"/tv":a("tv")?location.href="/tv":a("play challenge match")&&n[1]?location.href="/?user="+n[1]+"#friend":a("light dark transp")?lichess.loadModule("dasher").then((()=>window.LichessDasher(document.createElement("div"),{playing:$("body").hasClass("playing")}))).then((e=>e.subs.background.set(s))):a("stream")&&n[1]?location.href="/streamer/"+n[1]:a("help")?(lichess.loadCssPath("clinput.help"),o($("<h3>Commands</h3>"+l("/tv /follow"," <user>","Watch someone play")+l("/play /challenge /match"," <user>","Challenge someone to play")+l("/light /dark /transp","","Change the background theme")+l("/stream","<user>","Watch someone stream")+"<h3>Global hotkeys</h3>"+l("s","","Search for a user")+l("/","","Type a command")+l("c","","Focus the chat input")+l("esc","","Close modals like this one")),"clinput-help")):alert(`Unknown command: "${e}". Type /help for the list of commands`)}(e.replace(/\//g,"")):void(location.href="/@/"+e)}function l(e,o,n){return'<div class="command"><div>'+e.split(" ").map((e=>`<p>${e} ${lichess.escapeHtml(o)}</p>`)).join("")+`</div> <span>${n}<span></div>`}return o.close=()=>{$("body").removeClass("overlayed"),$("#modal-overlay").each((function(){o.onClose&&o.onClose(),$(this).remove()})),delete o.onClose},o.onClose=void 0,e.app=function(e){lichess.userComplete().then((o=>{o({input:e,friend:!0,focus:!0,onSelect:e=>n(e.name)}),$(e).on("keydown",(o=>{"Enter"==o.code&&(n(e.value),e.blur())}))}))},Object.defineProperty(e,"__esModule",{value:!0}),e}({});
